/*
Â© 2025 Sharon Aicler (saichler@gmail.com)

Layer 8 Ecosystem is licensed under the Apache License, Version 2.0.
You may obtain a copy of the License at:

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
syntax = "proto3";

package prj;

option go_package = "./types/prj";

import "prj-common.proto";
import "erp-common.proto";
import "api.proto";

// ============================================================================
// PROJECT PLANNING MESSAGES
// ============================================================================

// @PrimeObject
// PrjProject represents a project
message PrjProject {
  string project_id = 1;
  string code = 2;
  string name = 3;
  string description = 4;
  PrjProjectType project_type = 5;
  PrjProjectStatus status = 6;
  PrjProjectPriority priority = 7;
  string customer_id = 8;                  // cross-ref: FIN Customer
  string account_id = 9;                   // cross-ref: CRM Account
  string manager_id = 10;                  // cross-ref: HCM Employee
  string department_id = 11;               // cross-ref: HCM Department
  string template_id = 12;                 // cross-ref: PrjProjectTemplate
  int64 start_date = 13;
  int64 end_date = 14;
  int64 actual_start_date = 15;
  int64 actual_end_date = 16;
  double estimated_hours = 17;
  double actual_hours = 18;
  erp.Money budget = 19;
  erp.Money actual_cost = 20;
  int32 percent_complete = 21;
  PrjBillingType billing_type = 22;
  string opportunity_id = 23;              // cross-ref: CRM Opportunity
  map<string, string> custom_fields = 24;
  erp.AuditInfo audit_info = 25;
}

message PrjProjectList {
  repeated PrjProject list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// PrjProjectTemplate represents a project template
message PrjProjectTemplate {
  string template_id = 1;
  string name = 2;
  string description = 3;
  PrjProjectType project_type = 4;
  double default_estimated_hours = 5;
  erp.Money default_budget = 6;
  PrjBillingType default_billing_type = 7;
  bool is_active = 8;
  map<string, string> custom_fields = 9;
  erp.AuditInfo audit_info = 10;
}

message PrjProjectTemplateList {
  repeated PrjProjectTemplate list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// PrjPhase represents a project phase
message PrjPhase {
  string phase_id = 1;
  string project_id = 2;                   // cross-ref: PrjProject
  string name = 3;
  string description = 4;
  int32 sequence = 5;
  int64 start_date = 6;
  int64 end_date = 7;
  int64 actual_start_date = 8;
  int64 actual_end_date = 9;
  double estimated_hours = 10;
  double actual_hours = 11;
  int32 percent_complete = 12;
  PrjProjectStatus status = 13;
  map<string, string> custom_fields = 14;
  erp.AuditInfo audit_info = 15;
}

message PrjPhaseList {
  repeated PrjPhase list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// PrjTask represents a project task
message PrjTask {
  string task_id = 1;
  string project_id = 2;                   // cross-ref: PrjProject
  string phase_id = 3;                     // cross-ref: PrjPhase
  string parent_task_id = 4;               // cross-ref: PrjTask (self-reference for subtasks)
  string wbs_code = 5;                     // Work Breakdown Structure code
  string name = 6;
  string description = 7;
  PrjTaskStatus status = 8;
  PrjTaskPriority priority = 9;
  string assignee_id = 10;                 // cross-ref: HCM Employee
  int64 start_date = 11;
  int64 due_date = 12;
  int64 actual_start_date = 13;
  int64 actual_end_date = 14;
  double estimated_hours = 15;
  double actual_hours = 16;
  double remaining_hours = 17;
  int32 percent_complete = 18;
  bool is_billable = 19;
  bool is_milestone = 20;
  map<string, string> custom_fields = 21;
  erp.AuditInfo audit_info = 22;
}

message PrjTaskList {
  repeated PrjTask list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// PrjMilestone represents a project milestone
message PrjMilestone {
  string milestone_id = 1;
  string project_id = 2;                   // cross-ref: PrjProject
  string phase_id = 3;                     // cross-ref: PrjPhase
  string name = 4;
  string description = 5;
  int64 target_date = 6;
  int64 actual_date = 7;
  PrjMilestoneStatus status = 8;
  bool is_billable = 9;
  erp.Money billing_amount = 10;
  string owner_id = 11;                    // cross-ref: HCM Employee
  map<string, string> custom_fields = 12;
  erp.AuditInfo audit_info = 13;
}

message PrjMilestoneList {
  repeated PrjMilestone list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// PrjDeliverable represents a project deliverable
message PrjDeliverable {
  string deliverable_id = 1;
  string project_id = 2;                   // cross-ref: PrjProject
  string milestone_id = 3;                 // cross-ref: PrjMilestone
  string task_id = 4;                      // cross-ref: PrjTask
  string name = 5;
  string description = 6;
  int64 due_date = 7;
  bool is_delivered = 8;
  int64 delivered_date = 9;
  string accepted_by = 10;
  int64 acceptance_date = 11;
  string notes = 12;
  map<string, string> custom_fields = 13;
  erp.AuditInfo audit_info = 14;
}

message PrjDeliverableList {
  repeated PrjDeliverable list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// PrjDependency represents a task dependency
message PrjDependency {
  string dependency_id = 1;
  string project_id = 2;                   // cross-ref: PrjProject
  string predecessor_task_id = 3;          // cross-ref: PrjTask
  string successor_task_id = 4;            // cross-ref: PrjTask
  PrjDependencyType dependency_type = 5;
  int32 lag_days = 6;
  map<string, string> custom_fields = 7;
  erp.AuditInfo audit_info = 8;
}

message PrjDependencyList {
  repeated PrjDependency list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// PrjRisk represents a project risk
message PrjRisk {
  string risk_id = 1;
  string project_id = 2;                   // cross-ref: PrjProject
  string name = 3;
  string description = 4;
  string category = 5;
  PrjRiskSeverity severity = 6;
  int32 probability = 7;                   // 0-100 percentage
  erp.Money potential_impact = 8;
  string impact_description = 9;
  string mitigation_plan = 10;
  string contingency_plan = 11;
  PrjRiskStatus status = 12;
  string owner_id = 13;                    // cross-ref: HCM Employee
  int64 identified_date = 14;
  int64 due_date = 15;
  map<string, string> custom_fields = 16;
  erp.AuditInfo audit_info = 17;
}

message PrjRiskList {
  repeated PrjRisk list = 1;
  l8api.L8MetaData metadata = 2;
}
