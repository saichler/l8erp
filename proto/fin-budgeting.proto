/*
Â© 2025 Sharon Aicler (saichler@gmail.com)

Layer 8 Ecosystem is licensed under the Apache License, Version 2.0.
You may obtain a copy of the License at:

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
syntax = "proto3";

package fin;

option go_package = "./types/fin";

import "fin-common.proto";
import "erp-common.proto";
import "api.proto";

// ============================================================================
// BUDGETING AND PLANNING MESSAGES
// ============================================================================

// @PrimeObject
// Budget represents a financial budget
message Budget {
  string budget_id = 1;
  string budget_name = 2;
  string description = 3;
  BudgetType budget_type = 4;
  BudgetStatus status = 5;
  string fiscal_year_id = 6;
  string department_id = 7;
  erp.Money total_amount = 8;
  string approved_by = 9;
  int64 approved_date = 10;
  string notes = 11;
  map<string, string> custom_fields = 12;
  erp.AuditInfo audit_info = 13;
  repeated BudgetLine lines = 14;
  repeated BudgetScenario scenarios = 15;
  repeated BudgetTransfer transfers = 16;
}

message BudgetList {
  repeated Budget list = 1;
  l8api.L8MetaData metadata = 2;
}

// BudgetLine represents a line item in a budget
message BudgetLine {
  string line_id = 1;
  string budget_id = 2;
  string account_id = 3;
  string fiscal_period_id = 4;
  erp.Money budgeted_amount = 5;
  erp.Money actual_amount = 6;
  erp.Money variance = 7;
  double variance_percent = 8;
  string description = 9;
  string notes = 10;
  erp.AuditInfo audit_info = 11;
}

// BudgetTransfer represents a transfer of budget between lines
message BudgetTransfer {
  string transfer_id = 1;
  string from_budget_line_id = 2;
  string to_budget_line_id = 3;
  erp.Money amount = 4;
  int64 transfer_date = 5;
  string reason = 6;
  string approved_by = 7;
  int64 approved_date = 8;
  string notes = 9;
  erp.AuditInfo audit_info = 10;
}

// BudgetScenario represents a what-if budget scenario
message BudgetScenario {
  string scenario_id = 1;
  string scenario_name = 2;
  string description = 3;
  string base_budget_id = 4;
  double adjustment_factor = 5;
  erp.Money projected_total = 6;
  bool is_active = 7;
  string notes = 8;
  erp.AuditInfo audit_info = 9;
}

// @PrimeObject
// CapitalExpenditure represents a capital expenditure request
message CapitalExpenditure {
  string capex_id = 1;
  string project_name = 2;
  string description = 3;
  string department_id = 4;
  string fiscal_year_id = 5;
  CapexStatus status = 6;
  erp.Money requested_amount = 7;
  erp.Money approved_amount = 8;
  erp.Money spent_amount = 9;
  int64 requested_date = 10;
  string requested_by = 11;
  string approved_by = 12;
  int64 approved_date = 13;
  int64 expected_completion_date = 14;
  string justification = 15;
  string notes = 16;
  erp.AuditInfo audit_info = 17;
}

message CapitalExpenditureList {
  repeated CapitalExpenditure list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// Forecast represents a financial forecast
message Forecast {
  string forecast_id = 1;
  string forecast_name = 2;
  string description = 3;
  ForecastType forecast_type = 4;
  string fiscal_year_id = 5;
  int64 forecast_date = 6;
  int64 period_start = 7;
  int64 period_end = 8;
  erp.Money projected_amount = 9;
  erp.Money actual_amount = 10;
  erp.Money variance = 11;
  string notes = 12;
  erp.AuditInfo audit_info = 13;
}

message ForecastList {
  repeated Forecast list = 1;
  l8api.L8MetaData metadata = 2;
}
