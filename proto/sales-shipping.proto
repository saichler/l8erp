/*
Â© 2025 Sharon Aicler (saichler@gmail.com)

Layer 8 Ecosystem is licensed under the Apache License, Version 2.0.
You may obtain a copy of the License at:

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
syntax = "proto3";

package sales;

option go_package = "./types/sales";

import "sales-common.proto";
import "erp-common.proto";
import "api.proto";

// ============================================================================
// SHIPPING AND DELIVERY MESSAGES
// ============================================================================

// @PrimeObject
// SalesDeliveryOrder represents a delivery/shipment to a customer
message SalesDeliveryOrder {
  string delivery_order_id = 1;
  string delivery_number = 2;
  string sales_order_id = 3;
  string customer_id = 4;               // Cross-ref: FIN Customer
  int64 planned_ship_date = 5;
  int64 actual_ship_date = 6;
  int64 planned_delivery_date = 7;
  int64 actual_delivery_date = 8;
  SalesDeliveryStatus status = 9;
  string warehouse_id = 10;             // Cross-ref: SCM Warehouse
  erp.Address ship_to_address = 11;
  string carrier_id = 12;
  string tracking_number = 13;
  string shipping_method = 14;
  erp.Money shipping_cost = 15;
  string notes = 16;
  map<string, string> custom_fields = 17;
  erp.AuditInfo audit_info = 18;
  repeated SalesDeliveryLine lines = 19;
  repeated SalesPickRelease pick_releases = 20;
  repeated SalesPackingSlip packing_slips = 21;
  repeated SalesShippingDoc shipping_docs = 22;
  repeated SalesDeliveryConfirm confirms = 23;
}

message SalesDeliveryOrderList {
  repeated SalesDeliveryOrder list = 1;
  l8api.L8MetaData metadata = 2;
}

// SalesDeliveryLine represents a line item on a delivery order (child of SalesDeliveryOrder)
message SalesDeliveryLine {
  string line_id = 1;
  int32 line_number = 2;
  string sales_order_line_id = 3;
  string item_id = 4;                   // Cross-ref: SCM Item
  string description = 5;
  double quantity = 6;
  string unit_of_measure = 7;
  string lot_number = 8;
  string serial_number = 9;
}

// SalesPickRelease represents a pick release for warehouse picking (child of SalesDeliveryOrder)
message SalesPickRelease {
  string pick_release_id = 1;
  string pick_number = 2;
  string warehouse_id = 3;              // Cross-ref: SCM Warehouse
  int64 release_date = 4;
  int64 pick_date = 5;
  SalesPickStatus status = 6;
  string assigned_to = 7;               // Cross-ref: HCM Employee
  string pick_zone = 8;
  int32 priority = 9;
  string notes = 10;
}

// SalesPackingSlip represents a packing slip for a shipment (child of SalesDeliveryOrder)
message SalesPackingSlip {
  string packing_slip_id = 1;
  string slip_number = 2;
  int64 pack_date = 3;
  string packed_by = 4;                 // Cross-ref: HCM Employee
  int32 total_packages = 5;
  double total_weight = 6;
  string weight_unit = 7;
  string notes = 8;
}

// SalesShippingDoc represents shipping documentation (child of SalesDeliveryOrder)
message SalesShippingDoc {
  string doc_id = 1;
  string doc_number = 2;
  SalesShipDocType doc_type = 3;
  int64 issue_date = 4;
  string issued_by = 5;
  string file_path = 6;
  string notes = 7;
}

// SalesDeliveryConfirm represents delivery confirmation/POD (child of SalesDeliveryOrder)
message SalesDeliveryConfirm {
  string confirm_id = 1;
  int64 confirm_date = 2;
  string received_by = 3;
  string signature_path = 4;
  string notes = 5;
  bool is_damaged = 6;
  string damage_description = 7;
  repeated string photo_paths = 8;
}
