/*
Â© 2025 Sharon Aicler (saichler@gmail.com)

Layer 8 Ecosystem is licensed under the Apache License, Version 2.0.
You may obtain a copy of the License at:

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
syntax = "proto3";

package fin;

option go_package = "./types/fin";

import "fin-common.proto";
import "erp-common.proto";
import "api.proto";

// ============================================================================
// TAX MANAGEMENT MESSAGES
// ============================================================================

// @PrimeObject
// TaxCode represents a tax code configuration
message TaxCode {
  string tax_code_id = 1;
  string code = 2;
  string name = 3;
  string description = 4;
  TaxType tax_type = 5;
  double rate = 6;
  bool is_compound = 7;
  string gl_account_id = 8;
  bool is_active = 9;
  int64 effective_date = 10;
  int64 end_date = 11;
  erp.AuditInfo audit_info = 12;
}

message TaxCodeList {
  repeated TaxCode list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// TaxJurisdiction represents a tax jurisdiction
message TaxJurisdiction {
  string jurisdiction_id = 1;
  string name = 2;
  string code = 3;
  JurisdictionLevel level = 4;
  string parent_jurisdiction_id = 5;
  string country_code = 6;
  string state_code = 7;
  string description = 8;
  bool is_active = 9;
  erp.AuditInfo audit_info = 10;
}

message TaxJurisdictionList {
  repeated TaxJurisdiction list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// TaxRule defines tax calculation rules for a code and jurisdiction
message TaxRule {
  string rule_id = 1;
  string tax_code_id = 2;
  string jurisdiction_id = 3;
  string name = 4;
  double rate = 5;
  erp.Money minimum_threshold = 6;
  erp.Money maximum_threshold = 7;
  int64 effective_date = 8;
  int64 end_date = 9;
  bool is_active = 10;
  string notes = 11;
  erp.AuditInfo audit_info = 12;
}

message TaxRuleList {
  repeated TaxRule list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// TaxReturn represents a tax return filing
message TaxReturn {
  string return_id = 1;
  string jurisdiction_id = 2;
  string fiscal_period_id = 3;
  TaxType tax_type = 4;
  TaxReturnStatus status = 5;
  int64 filing_date = 6;
  int64 due_date = 7;
  erp.Money taxable_amount = 8;
  erp.Money tax_amount = 9;
  erp.Money amount_paid = 10;
  erp.Money amount_due = 11;
  string filed_by = 12;
  string confirmation_number = 13;
  string notes = 14;
  erp.AuditInfo audit_info = 15;
}

message TaxReturnList {
  repeated TaxReturn list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// TaxExemption represents a tax exemption for a customer or vendor
message TaxExemption {
  string exemption_id = 1;
  string tax_code_id = 2;
  string customer_id = 3;
  string vendor_id = 4;
  string exemption_number = 5;
  string reason = 6;
  int64 effective_date = 7;
  int64 expiration_date = 8;
  bool is_active = 9;
  string document_url = 10;
  string notes = 11;
  erp.AuditInfo audit_info = 12;
}

message TaxExemptionList {
  repeated TaxExemption list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// WithholdingTaxConfig represents withholding tax configuration for a vendor
message WithholdingTaxConfig {
  string config_id = 1;
  string vendor_id = 2;
  string tax_code_id = 3;
  double withholding_rate = 4;
  erp.Money threshold_amount = 5;
  int64 effective_date = 6;
  int64 end_date = 7;
  bool is_active = 8;
  string notes = 9;
  erp.AuditInfo audit_info = 10;
}

message WithholdingTaxConfigList {
  repeated WithholdingTaxConfig list = 1;
  l8api.L8MetaData metadata = 2;
}
