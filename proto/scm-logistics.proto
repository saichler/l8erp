/*
Â© 2025 Sharon Aicler (saichler@gmail.com)

Layer 8 Ecosystem is licensed under the Apache License, Version 2.0.
You may obtain a copy of the License at:

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
syntax = "proto3";

package scm;

option go_package = "./types/scm";

import "scm-common.proto";
import "erp-common.proto";
import "api.proto";

// ============================================================================
// LOGISTICS MESSAGES
// ============================================================================

// @PrimeObject
// ScmCarrier represents a shipping carrier or freight provider
message ScmCarrier {
  string carrier_id = 1;
  string code = 2;
  string name = 3;
  ScmCarrierType carrier_type = 4;
  erp.ContactInfo contact_info = 5;
  bool is_active = 6;
  double rating = 7;
  string notes = 8;
  map<string, string> custom_fields = 9;
  erp.AuditInfo audit_info = 10;
}

message ScmCarrierList {
  repeated ScmCarrier list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// ScmFreightRate represents a shipping rate for a carrier and route
message ScmFreightRate {
  string rate_id = 1;
  string carrier_id = 2;
  string origin = 3;
  string destination = 4;
  erp.Money rate_per_unit = 5;
  string unit_type = 6;
  int64 effective_date = 7;
  int64 expiry_date = 8;
  double min_weight = 9;
  double max_weight = 10;
  string notes = 11;
  erp.AuditInfo audit_info = 12;
}

message ScmFreightRateList {
  repeated ScmFreightRate list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// ScmShipment represents a shipment of goods
message ScmShipment {
  string shipment_id = 1;
  string shipment_number = 2;
  string carrier_id = 3;
  string origin_warehouse_id = 4;
  erp.Address destination_address = 5;
  string customer_id = 6;           // Cross-ref: FIN Customer
  int64 ship_date = 7;
  int64 expected_delivery = 8;
  int64 actual_delivery = 9;
  ScmShipmentStatus status = 10;
  string tracking_number = 11;
  double total_weight = 12;
  erp.Money freight_cost = 13;
  string notes = 14;
  map<string, string> custom_fields = 15;
  erp.AuditInfo audit_info = 16;
}

message ScmShipmentList {
  repeated ScmShipment list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// ScmRoute represents a shipping route
message ScmRoute {
  string route_id = 1;
  string name = 2;
  string description = 3;
  string origin = 4;
  string destination = 5;
  double distance = 6;
  int32 estimated_time = 7;
  string carrier_id = 8;
  bool is_active = 9;
  string notes = 10;
  erp.AuditInfo audit_info = 11;
}

message ScmRouteList {
  repeated ScmRoute list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// ScmLoadPlan represents a load planning for a shipment
message ScmLoadPlan {
  string load_plan_id = 1;
  string shipment_id = 2;
  string vehicle_id = 3;
  double total_weight = 4;
  double total_volume = 5;
  double max_weight = 6;
  double max_volume = 7;
  ScmTaskStatus status = 8;
  int64 planned_date = 9;
  string notes = 10;
  erp.AuditInfo audit_info = 11;
}

message ScmLoadPlanList {
  repeated ScmLoadPlan list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// ScmDeliveryProof represents proof of delivery for a shipment
message ScmDeliveryProof {
  string proof_id = 1;
  string shipment_id = 2;
  int64 delivery_date = 3;
  string received_by = 4;
  string signature = 5;
  string photo_url = 6;
  string notes = 7;
  string status = 8;
  erp.AuditInfo audit_info = 9;
}

message ScmDeliveryProofList {
  repeated ScmDeliveryProof list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// ScmFreightAudit represents an audit of freight charges
message ScmFreightAudit {
  string audit_id = 1;
  string shipment_id = 2;
  string carrier_id = 3;
  erp.Money invoiced_amount = 4;
  erp.Money actual_amount = 5;
  erp.Money variance = 6;
  int64 audit_date = 7;
  string status = 8;
  string notes = 9;
  erp.AuditInfo audit_info = 10;
}

message ScmFreightAuditList {
  repeated ScmFreightAudit list = 1;
  l8api.L8MetaData metadata = 2;
}

// @PrimeObject
// ScmReturnAuthorization represents a return merchandise authorization (RMA)
message ScmReturnAuthorization {
  string rma_id = 1;
  string rma_number = 2;
  string customer_id = 3;           // Cross-ref: FIN Customer
  string original_shipment_id = 4;
  string reason = 5;
  ScmRequisitionStatus status = 6;
  int64 return_date = 7;
  string items_description = 8;
  erp.Money refund_amount = 9;
  string notes = 10;
  map<string, string> custom_fields = 11;
  erp.AuditInfo audit_info = 12;
}

message ScmReturnAuthorizationList {
  repeated ScmReturnAuthorization list = 1;
  l8api.L8MetaData metadata = 2;
}
